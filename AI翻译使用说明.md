# AI翻译脚本使用说明

## 功能特点

✨ **智能翻译**: 使用指定的AI模型进行高质量翻译  
🔄 **多密钥轮换**: 支持多个API密钥自动轮换，提高稳定性  
🛡️ **内容保护**: 自动保护代码块、数学公式、链接等不被翻译  
⚡ **增量翻译**: 只翻译新增或修改的文件，节省时间和成本  
🔧 **错误重试**: 智能重试机制，处理API限制和网络问题  
📊 **进度跟踪**: 实时显示翻译进度和统计信息  

## 快速开始

### 1. 配置API密钥

编辑 `ai_translate_notebooks.py` 文件中的配置部分：

```python
API_KEYS = [
    "your-actual-api-key-1",
    "your-actual-api-key-2", 
    "your-actual-api-key-3",
]
BASE_URL = "https://api.poe.com/v1/"
MODEL = "GPT-5-mini"
```

### 2. 安装依赖

```bash
pip install requests
```

### 3. 运行翻译

```bash
python ai_translate_notebooks.py
```

## 详细配置

### API设置
- **API_KEYS**: API密钥列表，支持多个密钥轮换使用
- **BASE_URL**: API基础地址
- **MODEL**: 使用的AI模型名称

### 翻译策略
- **Markdown单元格**: 翻译所有文本内容，保护代码和公式
- **代码单元格**: 只翻译注释，保持代码完整性
- **保护模式**: 自动识别并保护不应翻译的内容

### 文件处理
- **增量处理**: 自动检测需要翻译的文件
- **目录结构**: 保持原有的目录结构不变
- **文件完整性**: 确保JSON格式正确，避免文件损坏

## 使用示例

### 基本翻译
```bash
python ai_translate_notebooks.py
```

### 检查翻译状态
脚本会自动显示：
- 待翻译文件数量
- 翻译进度
- API使用统计
- 错误和重试信息

## 注意事项

### API使用
- 确保API密钥有效且有足够额度
- 合理设置请求间隔避免限制
- 多密钥可以提高稳定性和速度

### 翻译质量
- 脚本专门优化了机器学习内容的翻译
- 技术术语保持准确性
- 保持代码和公式完整性

### 文件安全
- 原始文件不会被修改
- 翻译结果保存在独立目录
- JSON格式验证确保文件完整

## 故障排除

### 常见问题

**API密钥错误**
```
❌ 请在脚本中配置您的API密钥！
```
→ 编辑脚本，替换示例密钥为真实密钥

**API限制**
```
API限制，5秒后重试...
```
→ 脚本会自动重试和切换密钥

**网络超时**
```
翻译错误: timeout
```
→ 脚本会自动重试，检查网络连接

### 性能优化

**提高翻译速度**
- 添加更多有效的API密钥
- 适当调整请求间隔
- 确保网络连接稳定

**降低成本**
- 只翻译必要的文件
- 使用增量翻译模式
- 选择合适的模型

## 文件结构

```
├── ai_translate_notebooks.py      # 主翻译脚本
├── translation_config.py          # 配置文件（可选）
├── notebooks-zh/                  # 翻译输出目录
│   ├── C1 - Supervised.../        # 保持原有结构
│   ├── C2 - Advanced.../
│   └── C3 - Unsupervised.../
└── 各种原始.ipynb文件
```

## 支持的内容类型

- ✅ Jupyter Notebook (.ipynb)
- ✅ Markdown单元格文本
- ✅ 代码注释
- ✅ 数学公式（保护）
- ✅ 代码块（保护）
- ✅ 图片和链接（保护）

## 更新记录

- v1.0: 基础翻译功能
- v1.1: 多密钥支持
- v1.2: 增量翻译
- v1.3: 内容保护优化